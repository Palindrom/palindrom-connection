<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <!-- Importing Web Component's Polyfill -->
    <script src="../../../webcomponentsjs/webcomponents.js"></script>
    <link rel="import" href="../shared/helpers.html">
    <script src="../../../web-component-tester/browser.js"></script>
    <script src='eventsSpecs.js'></script>
    <!-- Step 1: import the element to test -->
    <link rel="import" href="../../palindrom-connection.html">
</head>

<body>
    <script>
        const consoleWarnSpy = sinon.spy(console, 'warn');
    </script>

    <palindrom-connection remote-url="/palindrom" ping-interval-s="0"></palindrom-connection>
    <palindrom-connection remote-url="/palindrom" ping-interval-s="0"></palindrom-connection>

    <script>
        describe('Event collision warning', function () {
            it('should warn about having two elements', () => {
                expect(consoleWarnSpy.getCall(0).args[0]).to.contain('It seems like you have more than one <palindrom-connection/> instance in your document. This could lead to events collision without event-prefix attribute, please prefix your event-names by setting `event-prefix` attribute, eg: `<palindrom-connection event-prefix="your-custom-prefix" />` and use the same prefix when subscribing to the events');
                console.warn.restore();
            })
        })
    </script>

</body>

</html>